/**
 * Title Bar Component
 * Includes: .title-bar, .inactive-title-bar, close/resize buttons
 */

/* ═══════════════════════════════════════════════
   ACTIVE TITLE BAR
   ═══════════════════════════════════════════════ */

.title-bar {
  flex: none;
  display: flex;
  align-items: center;
  height: var(--title-bar-height);
  margin: 0;
  padding: var(--title-bar-padding) var(--title-bar-padding-h);
  
  /* Local stripe position calculations */
  --s: var(--stripe-thickness);
  --g: var(--stripe-gap);
  --p0: var(--stripe-start);
  --p1: calc(var(--p0) + var(--s));
  --p2: calc(var(--p1) + var(--g));
  --p3: calc(var(--p2) + var(--s));
  --p4: calc(var(--p3) + var(--g));
  --p5: calc(var(--p4) + var(--s));
  --p6: calc(var(--p5) + var(--g));
  --p7: calc(var(--p6) + var(--s));
  --p8: calc(var(--p7) + var(--g));
  --p9: calc(var(--p8) + var(--s));
  --p10: calc(var(--p9) + var(--g));
  --p11: calc(var(--p10) + var(--s));
  
  background: 
    /* Horizontal stripes */
    linear-gradient(
      to bottom,
      transparent 0%,
      transparent var(--p0),
      var(--title-bar-stripe) var(--p0),
      var(--title-bar-stripe) var(--p1),
      transparent var(--p1),
      transparent var(--p2),
      var(--title-bar-stripe) var(--p2),
      var(--title-bar-stripe) var(--p3),
      transparent var(--p3),
      transparent var(--p4),
      var(--title-bar-stripe) var(--p4),
      var(--title-bar-stripe) var(--p5),
      transparent var(--p5),
      transparent var(--p6),
      var(--title-bar-stripe) var(--p6),
      var(--title-bar-stripe) var(--p7),
      transparent var(--p7),
      transparent var(--p8),
      var(--title-bar-stripe) var(--p8),
      var(--title-bar-stripe) var(--p9),
      transparent var(--p9),
      transparent var(--p10),
      var(--title-bar-stripe) var(--p10),
      var(--title-bar-stripe) var(--p11),
      transparent var(--p11),
      transparent 100%
    );
  background-color: var(--surface-header);
  background-repeat: no-repeat;
  border-bottom: var(--border-width) solid var(--border-active);
  box-shadow:
    inset calc(-1 * var(--vertical-stripe-width)) calc(-1 * var(--horizontal-glow-width)) 0 0 var(--title-bar-glow-dark),
    inset var(--vertical-stripe-width) var(--horizontal-glow-width) 0 0 var(--title-bar-glow-light);
}

.title-bar .title {
  padding: 0 var(--title-padding-right) 0 var(--title-padding-left);
  margin: 0 auto;
  font-size: calc(14 * var(--base-unit));
  font-weight: normal;
  line-height: calc(14 * var(--base-unit));
  text-align: center;
  background: var(--surface-header);
  cursor: default;
  font-family: Chicago_12, Chicago, sans-serif;
  color: var(--text-color);
  white-space: nowrap;
}

/* ═══════════════════════════════════════════════
   INACTIVE TITLE BAR
   ═══════════════════════════════════════════════ */

.inactive-title-bar {
  flex: none;
  display: flex;
  align-items: center;
  height: var(--title-bar-height);
  margin: 0;
  padding: var(--title-bar-padding) var(--title-bar-padding-h);
  background: var(--surface);
  border-bottom: var(--border-width) solid var(--border-inactive);
}

.inactive-title-bar .title {
  padding: 0 var(--title-padding-right) 0 var(--title-padding-left);
  margin: 0 auto;
  font-size: calc(14 * var(--base-unit));
  font-weight: normal;
  line-height: calc(14 * var(--base-unit));
  text-align: center;
  background: var(--surface);
  cursor: default;
  font-family: Chicago_12, Chicago, sans-serif;
  color: var(--text-disabled);
}

/* ═══════════════════════════════════════════════
   TITLE BAR BUTTONS (Active)
   ═══════════════════════════════════════════════ */

.title-bar button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  height: var(--button-hole-size);
  width: var(--button-hole-size);
  margin: var(--title-button-margin);
  padding: 0;
  outline: none;
  border-radius: 0;
  border: none;
  cursor: pointer;
  flex-shrink: 0;
  background: transparent;
  box-shadow: 0 0 0 var(--border-width) var(--surface-header);
}

/* Close button */
.title-bar button.close {
  margin-left: var(--title-button-close-margin);
  background: url("../../icon/window-button-close.svg") no-repeat center / contain;
}

/* Resize/zoom button */
.title-bar button.resize {
  margin-right: var(--title-button-resize-margin);
  background: url("../../icon/window-button-resize.svg") no-repeat center / contain;
}

/* Active state (clicked) - applies to both close and resize */
.title-bar button:active {
  background: url("../../icon/window-button-clicked.svg") no-repeat center / contain;
  box-shadow: 0 0 0 var(--button-active-border-thickness) var(--surface-header);
}

/* Remove the ::before pseudo-element since we're using SVGs now */
.title-bar button::before {
  display: none;
}

/* Remove the ::after pseudo-element for resize button */
.title-bar button.resize::after {
  display: none;
}

.title-bar button span {
  position: absolute !important;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
}

.title-bar button.hidden {
  visibility: hidden;
}

/* ═══════════════════════════════════════════════
   INACTIVE TITLE BAR BUTTONS
   ═══════════════════════════════════════════════ */

.inactive-title-bar button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--inactive-button-size);
  height: var(--inactive-button-size);
  margin: 0;
  padding: 0;
  border: var(--border-width) solid var(--border-inactive);
  background: var(--color-white);
  cursor: default;
  flex-shrink: 0;
}

.inactive-title-bar button::before {
  content: "";
  display: block;
  width: var(--inactive-button-inner-size);
  height: var(--inactive-button-inner-size);
  background: var(--color-white);
  border: var(--border-width) solid var(--border-inactive);
  box-shadow: none;
}

.inactive-title-bar button.close {
  margin-right: var(--inactive-button-margin);
}

.inactive-title-bar button.resize {
  margin-left: var(--inactive-button-margin);
}